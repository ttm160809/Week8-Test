import{a as v}from"./axios-L6U4YIEh.js";import{_ as E,m as p,a as b,r as g,o as a,b as n,d as t,e as l,w as d,f as c,F as w,k as x,t as u,j as m,l as k,v as $}from"./index-B5db85Gd.js";import{c as r}from"./cartStore-qu-TtaGn.js";import{s as C}from"./sweetAlertStore-EjHrft8k.js";var S={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_NAME:"eatburgertest",BASE_URL:"/Week8-Test/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:V,VITE_NAME:T}=S,U={data(){return{}},methods:{...p(r,["getCarts"]),...p(r,["deleteAllCart"]),...p(r,["deleteCart"]),...p(r,["changeCartQty"]),...p(C,["successToast"]),...p(C,["errorToast"]),useCoupon(s){const e={code:s};v.post(`${V}/v2/api/${T}/coupon`,{data:e}).then(()=>{this.getCarts(),this.coupon="",this.successToast("クーポンを使用しました")}).catch(()=>{this.coupon="",this.errorToast("クーポンコードが正しくありません")})},checkTotal(){const s={code:"OPEN30"};for(let e=0;e<this.carts.length;e+=1)this.carts[e].coupon===void 0&&this.final_total!==this.total&&v.post(`${V}/v2/api/${T}/coupon`,{data:s}).then(()=>{this.getCarts()}).catch(h=>{this.coupon="",alert(h.response.data.message)})}},mounted(){},computed:{...b(r,["carts"]),...b(r,["final_total"]),...b(r,["total"])}},A={class:"container mt-md-5 pt-5"},D={class:"d-flex flex-column d-md-none align-items-center mb-5"},R={class:"border border-primary bg-primary w-100 text-center py-2 py-md-4"},j=t("div",{class:"d-flex align-items-center"},[t("i",{class:"bi bi-caret-down-fill col fs-1 text-primary"})],-1),L={class:"border border-primary w-100 text-center py-2 py-md-4"},M=t("div",{class:"d-flex align-items-center"},[t("i",{class:"bi bi-caret-down col fs-1 text-primary"})],-1),N={class:"border border-primary w-100 text-center py-2 py-md-4"},B={class:"d-none d-md-flex justify-content-center mb-5 centerWrap mx-auto"},I={class:"border border-primary bg-primary px-7 py-4"},O=t("div",{class:"d-flex align-items-center"},[t("i",{class:"bi bi-caret-right-fill col fs-1 text-primary"})],-1),q={class:"border border-primary px-7 py-4"},F=t("div",{class:"d-flex align-items-center"},[t("i",{class:"bi bi-caret-right col fs-1 text-primary"})],-1),P={class:"border border-primary px-7 py-4"},Q={class:"row"},W={class:"col-md-8"},z={class:"bg-white p-3 mb-3 mb-md-0"},G={class:"d-flex justify-content-between align-items-end mb-3"},H=t("h2",null,"カート内の商品",-1),J={class:"text-end"},K=["disabled"],X=t("i",{class:"cart-delete bi bi-trash3-fill rounded me-1 fs-6"},null,-1),Y={key:0,class:"d-flex flex-column align-items-center mb-4"},Z=t("i",{class:"bi bi-cart-x-fill fs-8r text-secondary"},null,-1),tt=t("span",{class:"fs-3 mb-4 text-secondary"},"購物車還沒有任何商品",-1),st=t("button",{type:"button",class:"btn btn-primary fs-3 py-2 px-5"},[t("span",{class:"text-white"},"選購去")],-1),et={key:1,class:"table align-middle cart-list"},ot={class:"cart-delete me-3"},at=["onClick","disabled"],nt=t("i",{class:"cart-delete bi bi-trash3-fill rounded fs-6"},null,-1),lt=[nt],dt={class:"d-flex flex-column-reverse d-md-block"},it=["src"],ct={class:"text-primary fw-bold fs-6 ms-0 ms-md-3"},rt={class:"text-end text-change fw-bold fs-5"},_t={class:"d-md-flex"},pt=["onUpdate:modelValue","onChange"],ut=["value"],bt={class:"w-100 ms-0 ms-md-5"},mt={class:"col-md-4"},ht=t("div",{class:"bg-dark p-2"},[t("h3",{class:"text-center text-white"},"訂單摘要")],-1),ft={class:"bg-white p-3"},yt={key:0,class:"d-flex justify-content-between align-items-end mb-4"},vt=t("h4",{class:"fw-bold"},"總價",-1),gt={class:"text-danger fw-bold fs-5"},wt={key:1},xt={class:"d-flex justify-content-between align-items-end mb-1"},kt=t("h4",{class:"fw-bold fs-5"},[t("del",null,"總價")],-1),Ct={class:"text-danger fw-bold fs-6"},Vt={class:"d-flex justify-content-between align-items-end mb-4"},Tt=t("h4",{class:"fw-bold fs-3"},"折扣價",-1),Et={class:"text-danger fw-bold fs-4"},$t={key:2,class:"input-group mb-3"},St=["disabled"],Ut={key:3,class:"input-group mb-3"},At=t("button",{type:"button",class:"btn btn-primary w-100 py-3 rounded-0"},[t("span",{class:"text-warning fw-bold fs-5"},"前往結帳資訊")],-1);function Dt(s,e,h,Rt,jt,f){const _=g("sapn"),y=g("RouterLink");return a(),n("div",A,[t("div",D,[t("div",R,[l(_,{class:"fs-4 text-white"},{default:d(()=>[c("1.確認品項")]),_:1})]),j,t("div",L,[l(_,{class:"fs-4"},{default:d(()=>[c("2.結帳資訊")]),_:1})]),M,t("div",N,[l(_,{class:"fs-4"},{default:d(()=>[c("3.訂單成立")]),_:1})])]),t("div",B,[t("div",I,[l(_,{class:"fs-4 text-white"},{default:d(()=>[c("1.確認品項")]),_:1})]),O,t("div",q,[l(_,{class:"fs-4"},{default:d(()=>[c("2.結帳資訊")]),_:1})]),F,t("div",P,[l(_,{class:"fs-4"},{default:d(()=>[c("3.訂單成立")]),_:1})])]),t("div",Q,[t("div",W,[t("div",z,[t("div",G,[H,t("div",J,[t("button",{class:"btn btn-outline-danger",type:"button",onClick:e[0]||(e[0]=o=>s.deleteAllCart()),disabled:s.carts.length===0},[X,c(" 全て削除 ")],8,K)])]),s.carts.length===0?(a(),n("div",Y,[Z,tt,l(y,{to:"/products"},{default:d(()=>[st]),_:1})])):(a(),n("table",et,[t("tbody",null,[(a(!0),n(w,null,x(s.carts,o=>(a(),n("tr",{key:o.id,class:"my-1"},[t("td",ot,[t("button",{class:"btn btn-outline-danger",type:"button",onClick:i=>s.deleteCart(o),disabled:s.carts.length===0},lt,8,at)]),t("td",dt,[t("img",{src:o.product.imageUrl,class:"cart-list-img card-img-top rounded-0",alt:"..."},null,8,it),t("span",ct,u(o.product.title),1)]),t("td",rt,[t("div",_t,[m(t("select",{name:"",id:"",class:"form-select mb-3 mb-md-0","onUpdate:modelValue":i=>o.qty=i,onChange:i=>s.changeCartQty(o)},[(a(),n(w,null,x(20,i=>t("option",{value:i,key:i},u(i),9,ut)),64))],40,pt),[[$,o.qty]]),t("span",bt,"¥ "+u(o.total),1)])])]))),128))])]))])]),t("div",mt,[ht,t("div",ft,[s.final_total===s.total?(a(),n("div",yt,[vt,t("span",gt,"¥ "+u(s.total),1)])):(a(),n("div",wt,[t("div",xt,[kt,t("span",Ct,[t("del",null,"¥ "+u(s.total),1)])]),t("div",Vt,[Tt,t("span",Et,"¥ "+u(Math.round(s.final_total)),1)])])),s.final_total===s.total?(a(),n("div",$t,[m(t("input",{type:"text",class:"form-control",placeholder:"請輸入優惠代碼","onUpdate:modelValue":e[1]||(e[1]=o=>s.coupon=o),"aria-label":"請輸入優惠代碼","aria-describedby":"button-addon2",disabled:s.carts.final_total!==s.carts.total},null,8,St),[[k,s.coupon]]),t("button",{class:"btn btn-dark",type:"button",id:"button-addon2",onClick:e[2]||(e[2]=o=>f.useCoupon(s.coupon))}," 使用 ")])):(a(),n("div",Ut,[m(t("input",{type:"text",class:"form-control",placeholder:"您已使用優惠券","onUpdate:modelValue":e[3]||(e[3]=o=>s.coupon=o),"aria-label":"您已使用優惠券","aria-describedby":"button-addon2",disabled:""},null,512),[[k,s.coupon]]),t("button",{class:"btn btn-dark",type:"button",id:"button-addon2",onClick:e[4]||(e[4]=o=>f.useCoupon(s.coupon)),disabled:""}," 使用 ")]))]),l(y,{to:"/cartinfo"},{default:d(()=>[At]),_:1})])])])}const It=E(U,[["render",Dt]]);export{It as default};
